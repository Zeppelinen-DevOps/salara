;!
;! Automatically generated configuration file
;! Filename: extensions.conf (/etc/asterisk/extensions.conf)
;! Generator: Manager
;! Creation Date: Wed Mar 21 15:07:45 2012
;!
;[default]
;exten => 8002,1,MixMonitor(${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}_${CALLERID(ani)}_${EXTEN}-${UNIQUEID}.wav,,${monopt})

[alnik]
exten => 1000,1,NoOp()
 same =>      n,Answer()
 same =>      n,Stasis(alarm)
 same =>      n,Hangup()
 
;exten => 1001,1,NoOp()
; same =>      n,Answer()
; same =>      n,Stasis(salara)
; same =>      n,Hangup()

;exten => 2020,1,Set(CURLOPT(httptimeout=2))
;same => 	n,Set(dest=${CURL(https://10.100.0.58:3000/call_center/incoming_call/check_is_org_only?phone=10)})
;same => 	n,salara(${dest})

exten => 2000,1,salara(${EXTEN})

exten => 8001,hint,8001
exten => 8001,1,Dial(SIP/8001,60,t)

exten => 8002,hint,SIP/8002
exten => 8002,1,Dial(SIP/8002,60,t)

exten => 8003,hint,SIP/8003
exten => 8003,1,Dial(SIP/8003,60,t)

exten => 8004,hint,SIP/8004
exten => 8004,1,Dial(SIP/${EXTEN}@8004,60,t)

exten => _72_barsa_kelmes,1,Dial(SIP/8002,60,tr)

exten => 8005,1,Dial(SIP/${EXTEN}@8005,60,t)

;exten => 54321,1,Dial(SIP/silent@8001,60,t)
;exten => silent,1,Dial(SIP/${EXTEN}@8001,60,t)

;exten => _9X.,1,Dial(SIP/${EXTEN}@8011,60,t)
;exten => _*9X.,1,Dial(SIP/${EXTEN}@8011,60,t)

;exten => _X.,1,Dial(SIP/${EXTEN}@8001,60,t)
;exten => _*X.,1,Dial(SIP/${EXTEN}@8001,60,t)

exten => 1234,1,Voicemail(1234)
same = n,Noop(${ANSWEREDTIME})
same = n,Noop(${VM_DUR})
same = n,Hangup
same = n,StopMonitor

;exten => 4321,1,Read(4321)
;same = n,Noop(${4321})
;same = n,Hangup

;exten => 1111,1,Answer
;exten => 1111,n,Wait(2)
;exten => 1111,n,Playback(conf-adminmenu)
;exten => 1111,n,Wait(2)
;exten => 1111,n,Dial(SIP/${EXTEN}@8002,60,t)


exten => support,1,Set(QueueMember=0)


exten => 0,hint,0
exten => 0,1,Answer
exten => 0,n,Wait(1)
exten => 0,n,Playback(08.rasstrel)
exten => 0,n,HangUp

exten => 8000,hint,8000
exten => 8000,1,Answer
exten => 8000,n,Wait(1)
exten => 8000,n,Playback(noch)
exten => 8000,n,HangUp

exten => 00,hint,00
exten => 00,1,Answer
exten => 00,n,Wait(1)
exten => 00,n,Playback(33.chudov)
exten => 00,n,HangUp

exten => 000,hint,000
exten => 000,1,Answer
exten => 000,n,Wait(1)
exten => 000,n,Playback(wolf)
exten => 000,n,HangUp

exten => 0000,hint,0000
exten => 0000,1,Answer
exten => 0000,n,Wait(1)
exten => 0000,n,Playback(noch)
exten => 0000,n,HangUp

exten => 00000,hint,00000
exten => 00000,1,Answer
exten => 00000,n,Wait(1)
exten => 00000,n,Playback(kupola)
exten => 00000,n,HangUp


;exten => 000,1,Answer
;exten => 000,n,Wait(1)
;exten => 000,n,Playback(HeyYou)
;exten => 000,n,HangUp

;exten => 0000,1,Answer
;exten => 0000,n,Wait(1)
;exten => 0000,n,Playback(ZZ)
;exten => 0000,n,HangUp

;exten = h,1,Noop(${CALLERID(num)})
;same = n,Noop(${VM_MSGNUM})
;same = n,Noop(${VM_CALLERID})
;same = n,Noop(${VM_DATE})
;same = n,Noop(${VM_MESSAGEFILE})
;same = n,Noop(${VM_DUR})
;same = n,System(mv ${VM_MESSAGEFILE}.wav /var/spool/asterisk/voicemail/default/1234/INBOX/${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}_${CALLERID(num)}_${VM_DUR}_${UNIQUEID}.wav)


[general]
static = yes
writeprotect = no
clearglobalvars = yes

[globals]
;FEATURES = 
;DIALOPTIONS = 
RINGTIME = 20


[macro-stdexten]
exten = s,1,Set(__DYNAMIC_FEATURES=${FEATURES})
exten = s,2,GotoIf($[${FOLLOWME_${ARG1}} = 1]?5:3)
exten = s,3,Dial(${ARG2},${RINGTIME},${DIALOPTIONS})
exten = s,4,Goto(s-${DIALSTATUS},1)
exten = s,5,Macro(stdexten-followme,${ARG1},${ARG2})
exten = s-NOANSWER,1,Voicemail(${ARG1},u)
exten = s-NOANSWER,2,Goto(default,s,1)
exten = s-BUSY,1,Voicemail(${ARG1},b)
exten = s-BUSY,2,Goto(default,s,1)
exten = _s-.,1,Goto(s-NOANSWER,1)
exten = a,1,VoicemailMain(${ARG1})

[macro-stdexten-followme]
exten = s,1,Dial(${ARG2},${RINGTIME},${DIALOPTIONS})
exten = s,2,Followme(${ARG1},a)
exten = s,3,Voicemail(${ARG1},u)
exten = s-NOANSWER,1,Voicemail(${ARG1},u)
exten = s-BUSY,1,Voicemail(${ARG1},b)
exten = s-BUSY,2,Goto(default,s,1)
exten = _s-.,1,Goto(s-NOANSWER,1)
exten = a,1,VoicemailMain(${ARG1})

[conferences]

[ringgroups]

[queues]

[voicemenus]

[voicemailgroups]

[directory]

[asterisk_guitools]
exten = executecommand,1,System(${command})
exten = executecommand,n,Hangup()
exten = record_vmenu,1,Answer
exten = record_vmenu,n,Playback(vm-intro)
exten = record_vmenu,n,Record(${var1})
exten = record_vmenu,n,Playback(vm-saved)
exten = record_vmenu,n,Playback(vm-goodbye)
exten = record_vmenu,n,Hangup
exten = play_file,1,Answer
exten = play_file,n,Playback(${var1})
exten = play_file,n,Hangup

[macro-trunkdial-failover-0.3]
exten = s,1,Set(CALLERID(num)=${IF($[${LEN(${CID_${CALLERID(num)}})} > 2]?${CID_${CALLERID(num)}}:)})
exten = s,n,GotoIf($[${LEN(${CALLERID(num)})} > 6]?1-dial,1)
exten = s,n,Set(CALLERID(all)=${IF($[${LEN(${CID_${ARG3}})} > 6]?${CID_${ARG3}}:${GLOBAL_OUTBOUNDCID})})
exten = s,n,Goto(1-dial,1)
exten = 1-dial,1,Dial(${ARG1})
exten = 1-dial,n,Gotoif(${LEN(${ARG2})} > 0 ?1-${DIALSTATUS},1:1-out,1)
exten = 1-CHANUNAVAIL,1,Dial(${ARG2})
exten = 1-CHANUNAVAIL,n,Hangup()
exten = 1-CONGESTION,1,Dial(${ARG2})
exten = 1-CONGESTION,n,Hangup()
exten = 1-out,1,Hangup()
